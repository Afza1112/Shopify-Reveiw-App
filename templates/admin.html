{% extends 'base.html' %}

{% block title %}Admin - Approve Reviews{% endblock %}

{% block content %}
  <div class="admin-container">
    <h2>Pending Reviews</h2>
    {% if reviews and reviews|length > 0 %}
      {% for review in reviews %}
        <div class="review admin-review">
          <div class="review-header">
            <span class="review-productid"><b>Product ID:</b> {{ review['product_id'] }}</span>
            <span class="review-rating">
              {% for i in range(1, 6) %}
                {% if i <= review['rating']|int %}
                  <span class="star">&#9733;</span>
                {% else %}
                  <span class="star inactive">&#9733;</span>
                {% endif %}
              {% endfor %}
            </span>
          </div>
          <div class="review-info">
            <b>Name:</b> {{ review['name'] }}<br>
            <b>Message:</b> {{ review['message'] }}<br>
            {% if review.get('image_url') %}
              <img src="{{ review['image_url'] }}" alt="User Product Pic" class="review-img">
            {% endif %}
          </div>
          <form method="POST" action="/admin/approve/{{ review['_id'] }}">
            <button type="submit" class="submit-btn">Approve</button>
          </form>
        </div>
      {% endfor %}
    {% else %}
      <p>No pending reviews.</p>
    {% endif %}
  </div>
{% endblock %}
